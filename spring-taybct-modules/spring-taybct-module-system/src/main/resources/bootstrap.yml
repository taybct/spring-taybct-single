springdoc:
  info:
    title: "系统模块"
# Spring
spring:
  main:
    #springCloud 的2.1.0以上版本的，将不再默认支持 FeignClient 的name属性 的相同名字。
    #即 ：多个接口上的@FeignClient(“相同服务名”)会报错，overriding is disabled(覆盖 是 禁止的/关闭的)。
    allow-bean-definition-overriding: true
  application:
    # 应用名称
    name: module-system
  profiles:
    active: dev
  config:
    # 导入配置
    # optional: 可选，如果不设置这个在拉取nacos配置异常时会快速失败，会导致 spring 容器启动失败
    # group: 指定 group 覆盖默认 group
    # refreshEnabled: 是否开启动态刷新
    import:
      - optional:nacos:${spring.application.name}.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 同应用名配置
      - optional:nacos:taybct.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 基本配置
      - optional:nacos:taybct-global-exception.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 全局异常配置
      - optional:nacos:taybct-swagger.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # swagger 配置
      - optional:nacos:taybct-redis.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # redis 配置
      - optional:nacos:taybct-mq.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # rabbit mq 配置
      - optional:nacos:taybct-datasource.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 数据源
      - optional:nacos:taybct-mybatis.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # mybatis-plus 配置
      - optional:nacos:taybct-dubbo.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # dubbo 配置
      - optional:nacos:taybct-data-scope.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # dubbo 配置
  cloud:
    # 使用 nacos 注册发现和配置
    nacos:
      username: nacos
      password: nacos
      discovery:
        # 服务注册地址
        server-addr: 127.0.0.1:8848
        # 命名空间
        namespace: taybct-3-5-x
        # 配置分组
        group: ${spring.profiles.active}
      config:
        # 服务注册地址
        server-addr: 127.0.0.1:8848
        # 命名空间
        namespace: taybct-3-5-x
        # 配置分组
        group: ${spring.profiles.active}
        # 配置文件格式
        file-extension: yml
taybct:
  tenant:
    tenant-tables:
      - sys_role
      - sys_dept
  rsa:
    # resources 目录下的证书
    resource: rsa.jks
    # 生成证书的时候配置的 alias
    alias: rsa
    # 生成证书的时候配置的 密码
    password: taybct
    type:
      LIMITED:
        resource: limited.jks
        alias: limited
        password: limited
        expire-check: true
  scheduled:
    pool-size: 20
    await-termination-seconds: 60
    thread-name-prefix: "Scheduler-"
    wait-for-tasks-to-complete-on-shutdown: true
    tasks:
      clearDirtyData:
        task-key: clearDirtyData
        cron: 0 0/1 * * * ?
        description: "清理权限脏数据"
        auto-start: 1
        sort: 0
        params:
          "tenantId": "000000"
      clearExpires:
        task-key: clearExpires
        cron: 0 0/1 * * * ?
        description: "清理登录超时用户"
        auto-start: 1
        sort: 1
        params:
          "tenantId": "000000"
      iniPermissionConfig:
        task-key: iniPermissionConfig
        cron: 0 0/1 * * * ?
        description: "初始化权限配置"
        auto-start: 1
        sort: 2
        params:
          "tenantId": "000000"
      iniParams:
        task-key: iniParams
        cron: 0 0/1 * * * ?
        description: "初始化参数配置"
        auto-start: 1
        sort: 0
        params:
          "tenantId": "000000"